\doxysection{bt\+Sdf\+Collision\+Shape.\+cpp}
\hypertarget{bt_sdf_collision_shape_8cpp_source}{}\label{bt_sdf_collision_shape_8cpp_source}\index{C:/Users/quant/source/repos/Dark-\/Matter-\/Engine/ENGINE/Libraries/include/Bullet/BulletCollision/CollisionShapes/btSdfCollisionShape.cpp@{C:/Users/quant/source/repos/Dark-\/Matter-\/Engine/ENGINE/Libraries/include/Bullet/BulletCollision/CollisionShapes/btSdfCollisionShape.cpp}}
\mbox{\hyperlink{bt_sdf_collision_shape_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bt_sdf_collision_shape_8h}{btSdfCollisionShape.h}}"{}}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bt_mini_s_d_f_8h}{btMiniSDF.h}}"{}}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bt_aabb_util2_8h}{LinearMath/btAabbUtil2.h}}"{}}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \mbox{\hyperlink{bt_scalar_8h_a38c30fdd0ea2558373a1b6e41c77d9d2}{ATTRIBUTE\_ALIGNED16}}(\textcolor{keyword}{struct})}
\DoxyCodeLine{00006\ \mbox{\hyperlink{bt_sdf_collision_shape_8cpp_a264150e4c9082f7e052d10717c35bef0}{btSdfCollisionShapeInternalData}}}
\DoxyCodeLine{00007\ \{}
\DoxyCodeLine{00008\ \ \ \ \ \mbox{\hyperlink{bt_scalar_8h_a073043644ede242268123f98ca10ec2d}{BT\_DECLARE\_ALIGNED\_ALLOCATOR}}();}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \ \ \ \ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\ \mbox{\hyperlink{bt_compound_shape_8h_ae70ba06a613edc3194c23dbd2924e01e}{m\_localScaling}};}
\DoxyCodeLine{00011\ \ \ \ \ \mbox{\hyperlink{bt_scalar_8h_a1e5824cfc8adbf5a77f2622132d16018}{btScalar}}\ \mbox{\hyperlink{bt_sdf_collision_shape_8cpp_a203e13992c68da25a489de53ee166466}{m\_margin}};}
\DoxyCodeLine{00012\ \ \ \ \ \mbox{\hyperlink{structbt_mini_s_d_f}{btMiniSDF}}\ \mbox{\hyperlink{bt_sdf_collision_shape_8cpp_ad7af577b25306f71ba614c43b8960b77}{m\_sdf}};}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \ \ \mbox{\hyperlink{bt_sdf_collision_shape_8cpp_a264150e4c9082f7e052d10717c35bef0}{btSdfCollisionShapeInternalData}}()}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{bt_compound_shape_8h_ae70ba06a613edc3194c23dbd2924e01e}{m\_localScaling}}(1,\ 1,\ 1),}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{bt_sdf_collision_shape_8cpp_a203e13992c68da25a489de53ee166466}{m\_margin}}(0)}
\DoxyCodeLine{00017\ \ \ \ \ \{}
\DoxyCodeLine{00018\ \ \ \ \ \}}
\DoxyCodeLine{00019\ \};}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classbt_sdf_collision_shape_a1baefbf6795eb9a292893431f4c3c00a}{btSdfCollisionShape::initializeSDF}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ sdfData,\ \textcolor{keywordtype}{int}\ sizeInBytes)}
\DoxyCodeLine{00022\ \{}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordtype}{bool}\ valid\ =\ m\_data-\/>m\_sdf.load(sdfData,\ sizeInBytes);}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordflow}{return}\ valid;}
\DoxyCodeLine{00025\ \}}
\DoxyCodeLine{00026\ \mbox{\hyperlink{classbt_sdf_collision_shape_a610e1e856836974c31e13c0c9d58c3eb}{btSdfCollisionShape::btSdfCollisionShape}}()}
\DoxyCodeLine{00027\ \{}
\DoxyCodeLine{00028\ \ \ \ \ m\_shapeType\ =\ \mbox{\hyperlink{bt_broadphase_proxy_8h_a629e290d766e52966199b687a537ba5ea6b808119395aeeca3247bf91603e5663}{SDF\_SHAPE\_PROXYTYPE}};}
\DoxyCodeLine{00029\ \ \ \ \ m\_data\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{bt_sdf_collision_shape_8cpp_a264150e4c9082f7e052d10717c35bef0}{btSdfCollisionShapeInternalData}}();}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{comment}{//"{}E:/develop/bullet3/data/toys/ground\_hole64\_64\_8.cdf"{});//ground\_cube.cdf"{});}}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{comment}{/*unsigned\ int\ field\_id=0;}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ \ \ \ Eigen::Vector3d\ x\ (1,10,1);}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ \ \ \ Eigen::Vector3d\ gradient;}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ \ \ \ double\ dist\ =\ m\_data-\/>m\_sdf.interpolate(field\_id,\ x,\ \&gradient);}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ \ \ \ printf("{}dist=\%g\(\backslash\)n"{},\ dist);}}
\DoxyCodeLine{00037\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00038\ \}}
\DoxyCodeLine{00039\ \mbox{\hyperlink{classbt_sdf_collision_shape_a3e1cbf7d18b6f6f9cd29b51cf206c4bc}{btSdfCollisionShape::\string~btSdfCollisionShape}}()}
\DoxyCodeLine{00040\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{delete}\ m\_data;}
\DoxyCodeLine{00042\ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classbt_sdf_collision_shape_a96817645a64ce527bbd6c7d2889fc271}{btSdfCollisionShape::getAabb}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{bt_transform_8h_addf03f129c64d2963d86b8f57ec01f82}{btTransform}}\&\ t,\ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\&\ aabbMin,\ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\&\ aabbMax)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00045\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{bt_scalar_8h_aff3e6078c073f6ba0edb95353f2c2c62}{btAssert}}(m\_data-\/>m\_sdf.isValid());}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\ localAabbMin\ =\ m\_data-\/>m\_sdf.m\_domain.m\_min;}
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\ localAabbMax\ =\ m\_data-\/>m\_sdf.m\_domain.m\_max;}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{bt_scalar_8h_a1e5824cfc8adbf5a77f2622132d16018}{btScalar}}\ margin(0);}
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{bt_aabb_util2_8h_a3d6c91fc55895e23a846e0d336dccfb0}{btTransformAabb}}(localAabbMin,\ localAabbMax,\ margin,\ t,\ aabbMin,\ aabbMax);}
\DoxyCodeLine{00051\ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classbt_sdf_collision_shape_aace1938db9e834703d831805a09db24b}{btSdfCollisionShape::setLocalScaling}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\&\ scaling)}
\DoxyCodeLine{00054\ \{}
\DoxyCodeLine{00055\ \ \ \ \ m\_data-\/>m\_localScaling\ =\ scaling;}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00057\ \textcolor{keyword}{const}\ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\&\ \mbox{\hyperlink{classbt_sdf_collision_shape_ac3405b581d7a4739f89f1240fbdba504}{btSdfCollisionShape::getLocalScaling}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00058\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_data-\/>m\_localScaling;}
\DoxyCodeLine{00060\ \}}
\DoxyCodeLine{00061\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classbt_sdf_collision_shape_aadf7b0bc59819c7c15b8f28e2bde60f7}{btSdfCollisionShape::calculateLocalInertia}}(\mbox{\hyperlink{bt_scalar_8h_a1e5824cfc8adbf5a77f2622132d16018}{btScalar}}\ mass,\ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\&\ inertia)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00062\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00063\ \ \ \ \ inertia.setValue(0,\ 0,\ 0);}
\DoxyCodeLine{00064\ \}}
\DoxyCodeLine{00065\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{classbt_sdf_collision_shape_a648923e96bb4f27aa1e4d04a3a5c4506}{btSdfCollisionShape::getName}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00066\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}btSdfCollisionShape"{}};}
\DoxyCodeLine{00068\ \}}
\DoxyCodeLine{00069\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classbt_sdf_collision_shape_aa89b884e088efd6fdee5d793810003bb}{btSdfCollisionShape::setMargin}}(\mbox{\hyperlink{bt_scalar_8h_a1e5824cfc8adbf5a77f2622132d16018}{btScalar}}\ margin)}
\DoxyCodeLine{00070\ \{}
\DoxyCodeLine{00071\ \ \ \ \ m\_data-\/>m\_margin\ =\ margin;}
\DoxyCodeLine{00072\ \}}
\DoxyCodeLine{00073\ \mbox{\hyperlink{bt_scalar_8h_a1e5824cfc8adbf5a77f2622132d16018}{btScalar}}\ \mbox{\hyperlink{classbt_sdf_collision_shape_a8c77a4fccf4e26b1479c01c85d5bc52a}{btSdfCollisionShape::getMargin}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00074\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_data-\/>m\_margin;}
\DoxyCodeLine{00076\ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classbt_sdf_collision_shape_a843a63d4533cae26e8fffb7992a3891a}{btSdfCollisionShape::processAllTriangles}}(\mbox{\hyperlink{classbt_triangle_callback}{btTriangleCallback}}*\ callback,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\&\ aabbMin,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\&\ aabbMax)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00079\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{comment}{//not\ yet}}
\DoxyCodeLine{00081\ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classbt_sdf_collision_shape_a2062f83fdb4de596f05e296691101fdc}{btSdfCollisionShape::queryPoint}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\&\ ptInSDF,\ \mbox{\hyperlink{bt_scalar_8h_a1e5824cfc8adbf5a77f2622132d16018}{btScalar}}\&\ distOut,\ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\&\ normal)}
\DoxyCodeLine{00084\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{int}\ field\ =\ 0;}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}\ grad;}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{double}\ dist;}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordtype}{bool}\ hasResult\ =\ m\_data-\/>m\_sdf.interpolate(field,\ dist,\ ptInSDF,\ \&grad);}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordflow}{if}\ (hasResult)}
\DoxyCodeLine{00090\ \ \ \ \ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ normal.setValue(grad[0],\ grad[1],\ grad[2]);}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ distOut\ =\ dist;}
\DoxyCodeLine{00093\ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{return}\ hasResult;}
\DoxyCodeLine{00095\ \}}

\end{DoxyCode}
