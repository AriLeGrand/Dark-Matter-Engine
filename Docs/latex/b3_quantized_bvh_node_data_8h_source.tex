\doxysection{b3\+Quantized\+Bvh\+Node\+Data.\+h}
\hypertarget{b3_quantized_bvh_node_data_8h_source}{}\label{b3_quantized_bvh_node_data_8h_source}\index{C:/Users/quant/source/repos/Dark-\/Matter-\/Engine/ENGINE/Libraries/include/Bullet/Bullet3Collision/NarrowPhaseCollision/shared/b3QuantizedBvhNodeData.h@{C:/Users/quant/source/repos/Dark-\/Matter-\/Engine/ENGINE/Libraries/include/Bullet/Bullet3Collision/NarrowPhaseCollision/shared/b3QuantizedBvhNodeData.h}}
\mbox{\hyperlink{b3_quantized_bvh_node_data_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#ifndef\ B3\_QUANTIZED\_BVH\_NODE\_H}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#define\ B3\_QUANTIZED\_BVH\_NODE\_H}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{b3_float4_8h}{Bullet3Common/shared/b3Float4.h}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#define\ B3\_MAX\_NUM\_PARTS\_IN\_BITS\ 10}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structb3_quantized_bvh_node_data}{b3QuantizedBvhNodeData}}\ \mbox{\hyperlink{b3_quantized_bvh_node_data_8h_a43dac16c437a47892cf69355feee562c}{b3QuantizedBvhNodeData\_t}};}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structb3_quantized_bvh_node_data}{b3QuantizedBvhNodeData}}}
\DoxyCodeLine{00015\ \{}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{comment}{//12\ bytes}}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structb3_quantized_bvh_node_data_ad5b02544ca7e5aa9f3ee70d4010467bc}{m\_quantizedAabbMin}}[3];}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structb3_quantized_bvh_node_data_a9656ecedb669e0dfe5124f8b1fffb7ee}{m\_quantizedAabbMax}}[3];}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{comment}{//4\ bytes}}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structb3_quantized_bvh_node_data_a0a480fcafd7c02b52d2246fb1f547e9e}{m\_escapeIndexOrTriangleIndex}};}
\DoxyCodeLine{00021\ \};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{b3_quantized_bvh_node_data_8h_ad43d927f54779f019903e0fb689305d2}{b3GetTriangleIndex}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structb3_quantized_bvh_node_data}{b3QuantizedBvhNodeData}}*\ rootNode)}
\DoxyCodeLine{00024\ \{}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{glad_8h_a92d0386e5c19fb81ea88c9f99644ab1d}{x}}\ =\ 0;}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a66ddd433d2cacfe27f5906b7e86faeed}{y}}\ =\ (\string~(\mbox{\hyperlink{glad_8h_a92d0386e5c19fb81ea88c9f99644ab1d}{x}}\ \&\ 0))\ <<\ (31\ -\/\ \mbox{\hyperlink{b3_quantized_bvh_node_data_8h_a113e277e83efe593431506b3ffbb295b}{B3\_MAX\_NUM\_PARTS\_IN\_BITS}});}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{comment}{//\ Get\ only\ the\ lower\ bits\ where\ the\ triangle\ index\ is\ stored}}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{return}\ (rootNode-\/>\mbox{\hyperlink{structb3_quantized_bvh_node_data_a0a480fcafd7c02b52d2246fb1f547e9e}{m\_escapeIndexOrTriangleIndex}}\ \&\ \string~(\mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a66ddd433d2cacfe27f5906b7e86faeed}{y}}));}
\DoxyCodeLine{00029\ \}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{b3_quantized_bvh_node_data_8h_a6fb6dcbb7a6a61da0ba9f830c6680647}{b3IsLeaf}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structb3_quantized_bvh_node_data}{b3QuantizedBvhNodeData}}*\ rootNode)}
\DoxyCodeLine{00032\ \{}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{comment}{//skipindex\ is\ negative\ (internal\ node),\ triangleindex\ >=0\ (leafnode)}}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordflow}{return}\ (rootNode-\/>\mbox{\hyperlink{structb3_quantized_bvh_node_data_a0a480fcafd7c02b52d2246fb1f547e9e}{m\_escapeIndexOrTriangleIndex}}\ >=\ 0)\ ?\ 1\ :\ 0;}
\DoxyCodeLine{00035\ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{b3_quantized_bvh_node_data_8h_ab463a028e32da48961a7e8a503a1b925}{b3GetEscapeIndex}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structb3_quantized_bvh_node_data}{b3QuantizedBvhNodeData}}*\ rootNode)}
\DoxyCodeLine{00038\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/rootNode-\/>\mbox{\hyperlink{structb3_quantized_bvh_node_data_a0a480fcafd7c02b52d2246fb1f547e9e}{m\_escapeIndexOrTriangleIndex}};}
\DoxyCodeLine{00040\ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{b3_quantized_bvh_node_data_8h_a615312b5c97f8b4f4c0feda811eb63ff}{b3QuantizeWithClamp}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*\ out,\ \mbox{\hyperlink{b3_float4_8h_a9eb2bdc66f8e56d30a2b77cfc987c0ba}{b3Float4ConstArg}}\ point2,\ \textcolor{keywordtype}{int}\ isMax,\ \mbox{\hyperlink{b3_float4_8h_a9eb2bdc66f8e56d30a2b77cfc987c0ba}{b3Float4ConstArg}}\ bvhAabbMin,\ \mbox{\hyperlink{b3_float4_8h_a9eb2bdc66f8e56d30a2b77cfc987c0ba}{b3Float4ConstArg}}\ bvhAabbMax,\ \mbox{\hyperlink{b3_float4_8h_a9eb2bdc66f8e56d30a2b77cfc987c0ba}{b3Float4ConstArg}}\ bvhQuantization)}
\DoxyCodeLine{00043\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \mbox{\hyperlink{b3_float4_8h_a3418582ecf8a3f4d44415729b23856f8}{b3Float4}}\ clampedPoint\ =\ \mbox{\hyperlink{b3_float4_8h_a18f522939517188808e81eb173b82b7b}{b3MaxFloat4}}(point2,\ bvhAabbMin);}
\DoxyCodeLine{00045\ \ \ \ \ clampedPoint\ =\ \mbox{\hyperlink{b3_float4_8h_aec6a0cacb4dd0e8665373f57fd1c27f3}{b3MinFloat4}}(clampedPoint,\ bvhAabbMax);}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{b3_float4_8h_a3418582ecf8a3f4d44415729b23856f8}{b3Float4}}\ \mbox{\hyperlink{glad_8h_a14cfbe2fc2234f5504618905b69d1e06}{v}}\ =\ (clampedPoint\ -\/\ bvhAabbMin)\ *\ bvhQuantization;}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordflow}{if}\ (isMax)}
\DoxyCodeLine{00049\ \ \ \ \ \{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ out[0]\ =\ (\textcolor{keywordtype}{unsigned}\ short)(((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short})(\mbox{\hyperlink{glad_8h_a14cfbe2fc2234f5504618905b69d1e06}{v}}.x\ +\ 1.f)\ |\ 1));}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ out[1]\ =\ (\textcolor{keywordtype}{unsigned}\ short)(((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short})(\mbox{\hyperlink{glad_8h_a14cfbe2fc2234f5504618905b69d1e06}{v}}.y\ +\ 1.f)\ |\ 1));}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ out[2]\ =\ (\textcolor{keywordtype}{unsigned}\ short)(((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short})(\mbox{\hyperlink{glad_8h_a14cfbe2fc2234f5504618905b69d1e06}{v}}.z\ +\ 1.f)\ |\ 1));}
\DoxyCodeLine{00053\ \ \ \ \ \}}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00055\ \ \ \ \ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ out[0]\ =\ (\textcolor{keywordtype}{unsigned}\ short)(((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short})(\mbox{\hyperlink{glad_8h_a14cfbe2fc2234f5504618905b69d1e06}{v}}.x)\ \&\ 0xfffe));}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ out[1]\ =\ (\textcolor{keywordtype}{unsigned}\ short)(((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short})(\mbox{\hyperlink{glad_8h_a14cfbe2fc2234f5504618905b69d1e06}{v}}.y)\ \&\ 0xfffe));}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ out[2]\ =\ (\textcolor{keywordtype}{unsigned}\ short)(((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short})(\mbox{\hyperlink{glad_8h_a14cfbe2fc2234f5504618905b69d1e06}{v}}.z)\ \&\ 0xfffe));}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{b3_quantized_bvh_node_data_8h_ac5068119569a896ba552ae261f5770e8}{b3TestQuantizedAabbAgainstQuantizedAabbSlow}}(}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \textcolor{keywordtype}{int}*\ aabbMin1,}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \textcolor{keywordtype}{int}*\ aabbMax1,}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \textcolor{keywordtype}{int}*\ aabbMin2,}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \textcolor{keywordtype}{int}*\ aabbMax2)}
\DoxyCodeLine{00067\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//int\ overlap\ =\ 1;}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{if}\ (aabbMin1[0]\ >\ aabbMax2[0])}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{if}\ (aabbMax1[0]\ <\ aabbMin2[0])}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{if}\ (aabbMin1[1]\ >\ aabbMax2[1])}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordflow}{if}\ (aabbMax1[1]\ <\ aabbMin2[1])}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordflow}{if}\ (aabbMin1[2]\ >\ aabbMax2[2])}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{if}\ (aabbMax1[2]\ <\ aabbMin2[2])}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{comment}{//overlap\ =\ ((aabbMin1[0]\ >\ aabbMax2[0])\ ||\ (aabbMax1[0]\ <\ aabbMin2[0]))\ ?\ 0\ :\ overlap;}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{comment}{//overlap\ =\ ((aabbMin1[2]\ >\ aabbMax2[2])\ ||\ (aabbMax1[2]\ <\ aabbMin2[2]))\ ?\ 0\ :\ overlap;}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{comment}{//overlap\ =\ ((aabbMin1[1]\ >\ aabbMax2[1])\ ||\ (aabbMax1[1]\ <\ aabbMin2[1]))\ ?\ 0\ :\ overlap;}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{comment}{//return\ overlap;}}
\DoxyCodeLine{00086\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//B3\_QUANTIZED\_BVH\_NODE\_H}}

\end{DoxyCode}
