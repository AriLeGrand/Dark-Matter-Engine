\doxysection{Dx11\+Scene.\+h}
\hypertarget{_dx11_scene_8h_source}{}\label{_dx11_scene_8h_source}\index{C:/Users/quant/source/repos/Dark-\/Matter-\/Engine/ENGINE/SceneAPI/Dx11Scene.h@{C:/Users/quant/source/repos/Dark-\/Matter-\/Engine/ENGINE/SceneAPI/Dx11Scene.h}}
\mbox{\hyperlink{_dx11_scene_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_scene_a_p_i_8h}{SceneAPI.h}}"{}}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_dx11_model_8h}{Dx11Model.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_model_info_8h}{ModelInfo.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_dx11_post_proccess_8h}{Dx11PostProccess.h}}"{}}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_dx11_scene_a0f5ff95f9b922137d23ad2fb5a4f4c3e}{Dx11Scene}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_scene}{Scene}}\ \{}
\DoxyCodeLine{00008\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00009\ \ \ \ \ std::vector<Dx11Model>\ models;}
\DoxyCodeLine{00010\ \ \ \ \ std::vector<ModelInfo*>\ modelsinfo;}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \ \ \ \ \mbox{\hyperlink{bt_convex_hull_computer_8cpp_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ BaseShaderProgramId;}
\DoxyCodeLine{00013\ \ \ \ \ \mbox{\hyperlink{bt_convex_hull_computer_8cpp_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ FinnalPassShaderProgramId;}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \ \ \ \ std::vector<Dx11PostProccess>\ PostProccessPasses;}
\DoxyCodeLine{00016\ \ \ \ \ ID3D11DeviceContext*\ deviceContext\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \ \ \ \ ID3D11Texture2D*\ renderTargetTexture\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00019\ \ \ \ \ ID3D11RenderTargetView*\ renderTargetView\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \ \ \ \ ID3D11Device*\ device;}
\DoxyCodeLine{00022\ \ \ \ \ ID3D10Blob*\ VS\_Buffer;}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{class_dx11_scene_a0f5ff95f9b922137d23ad2fb5a4f4c3e}{Dx11Scene}}(\mbox{\hyperlink{bt_convex_hull_computer_8cpp_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ ShaderProgramId,\ \mbox{\hyperlink{bt_convex_hull_computer_8cpp_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ FinnalPassShaderProgramID)\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ BaseShaderProgramId\ =\ ShaderProgramId;}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ FinnalPassShaderProgramId\ =\ FinnalPassShaderProgramID;}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ console.Log(\textcolor{stringliteral}{"{}Scene\ created!"{}},\ \mbox{\hyperlink{_console_manager_8h_ab2d7ab3465c4ea6c2054e6307dde8255ad57057b1c58cba9d4c5bd4f3ab7ee78e}{API::DX11}},\ \mbox{\hyperlink{_console_manager_8h_a526fd8626902411d5c8bf3b6ca134a12a551b723eafd6a31d444fcb2f5920fbd3}{LEVEL::INFO}});}
\DoxyCodeLine{00029\ \ \ \ \ \};}
\DoxyCodeLine{00030\ \ \ \ \ \mbox{\hyperlink{class_dx11_scene_aaf23b2bb525a7447512ab0f7ff95a31a}{\string~Dx11Scene}}()\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (renderTargetTexture)\ renderTargetTexture-\/>Release();}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (renderTargetView)\ renderTargetView-\/>Release();}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (device)\ device-\/>Release();}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (VS\_Buffer)\ VS\_Buffer-\/>Release();}
\DoxyCodeLine{00035\ \ \ \ \ \};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_dx11_scene_a195d5b62b599837e4826baf2e7da9bae}{SetDxDeviceContext}}(ID3D11Device*\ dxDevice,\ ID3D11DeviceContext*\ d3d11DevCon,\ ID3D10Blob*\ DxVS\_Buffer)\ \{}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ deviceContext\ =\ d3d11DevCon;}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ device\ =\ dxDevice;}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ VS\_Buffer\ =\ DxVS\_Buffer;}
\DoxyCodeLine{00043\ \ \ \ \ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_dx11_scene_ae31daa693b4ac36e241e558c8d62d2de}{AddModel}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ path[],\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ texture\_path[])\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_dx11_model}{Dx11Model}}\ \_;}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \_.\mbox{\hyperlink{class_dx11_model_a35a85e426fa4c8df99715d45793a056d}{SetDxDeviceContext}}(device,\ deviceContext,\ VS\_Buffer);}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \_.\mbox{\hyperlink{class_dx11_model_a1da00215a87c0d6babfb4478a4a30835}{Load}}(path,\ texture\_path,\ BaseShaderProgramId);}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\_.SetProgram(BaseShaderProgramId);}}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \_.\mbox{\hyperlink{class_dx11_model_a43b6299d9225920e79b93bdfd1b2161d}{GetInfo}}()-\/>\mbox{\hyperlink{class_model_info_ac32e5b840d4a28eb8f34127d3b2706c2}{ShaderProgramId}}\ =\ BaseShaderProgramId;}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ models.push\_back(\_);}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ console.Log(\textcolor{stringliteral}{"{}Model\ added"{}},\ \mbox{\hyperlink{_console_manager_8h_ab2d7ab3465c4ea6c2054e6307dde8255ad57057b1c58cba9d4c5bd4f3ab7ee78e}{API::DX11}},\ \mbox{\hyperlink{_console_manager_8h_a526fd8626902411d5c8bf3b6ca134a12ad0749aaba8b833466dfcbb0428e4f89c}{LEVEL::SUCCESS}});}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_dx11_scene_aa9e5ce77e35cd9081e97b6ab532c5d09}{RemoveModel}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{bt_soft_body_8cpp_a7eee887aa26478b2de7daf4c0c2cb61b}{IDX}})\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_dx11_scene_af748853ead33768aed6cb73cec27ed91}{GetModelCount}}()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ models.size();}
\DoxyCodeLine{00061\ \ \ \ \ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \mbox{\hyperlink{class_model_info}{ModelInfo}}*\ \mbox{\hyperlink{class_dx11_scene_af3c1962c0ff65613598099fc6d1eb5aa}{GetModelInfoAtIdx}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{bt_soft_body_8cpp_a7eee887aa26478b2de7daf4c0c2cb61b}{IDX}})\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ models.at(\mbox{\hyperlink{bt_soft_body_8cpp_a7eee887aa26478b2de7daf4c0c2cb61b}{IDX}}).GetInfo();}
\DoxyCodeLine{00065\ \ \ \ \ \}}
\DoxyCodeLine{00066\ \ \ \ \ std::vector<ModelInfo*>\ \mbox{\hyperlink{class_dx11_scene_ad100375dc7535cc158b25feaf53f1bf3}{GetModelsInfo}}()\textcolor{keyword}{\ override\ }\{\ \textcolor{keywordflow}{return}\ modelsinfo;\ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_dx11_scene_a1ff808a9bdca1b79c09b470429846169}{AddPostProccessPass}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ path[],\ \textcolor{keywordtype}{int}\ ScreenWidth,\ \textcolor{keywordtype}{int}\ ScreenHeight)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_dx11_shader}{Dx11Shader}}\ \_;}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \_.\mbox{\hyperlink{class_dx11_shader_a6abb229aaa54ac415f6bfab5ca671cb1}{InitShader}}(path,\ ScreenWidth,\ ScreenHeight,\ 45.0f,\ 0.1f,\ 100.0f);}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_dx11_post_proccess}{Dx11PostProccess}}\ pass;}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ pass.\mbox{\hyperlink{class_dx11_post_proccess_a9399b3cfc72baa6312e207807a5d8a65}{SetShaderID}}(\_.\mbox{\hyperlink{class_dx11_shader_a007894efb68d5407aa079fdca02ec555}{GetShaderId}}());}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ PostProccessPasses.push\_back(pass);}
\DoxyCodeLine{00075\ \ \ \ \ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_dx11_scene_ac72cbe469099e5fb56d4fda908e68849}{RemovePostProccessPassAtIdx}}(\textcolor{keywordtype}{int}\ Idx)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ PostProccessPasses.erase(PostProccessPasses.begin()\ +\ Idx);}
\DoxyCodeLine{00079\ \ \ \ \ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \mbox{\hyperlink{bt_convex_hull_computer_8cpp_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \mbox{\hyperlink{class_dx11_scene_a04ac47fae31de1280c9578f0bd7360b0}{GetRenderTarget}}()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{bt_convex_hull_computer_8cpp_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\textcolor{keyword}{>}(renderTargetTexture);}
\DoxyCodeLine{00084\ \ \ \ \ \}}
\DoxyCodeLine{00085\ \ \ \ \ std::string\ \mbox{\hyperlink{class_dx11_scene_abea4e02fcccac830ca2dd77f31e650b8}{GetModelsName}}()\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a5c4947d4516dd7cfa3505ce3a648a4ef}{name}};}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ model\ :\ models)\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a5c4947d4516dd7cfa3505ce3a648a4ef}{name}}\ +=\ model.GetModelName()\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_a5c4947d4516dd7cfa3505ce3a648a4ef}{name}};}
\DoxyCodeLine{00091\ \ \ \ \ \}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_dx11_scene_ae7616c7235a727e5d4c561ba85d34870}{GetSceneVerticesCount}}()\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \_\ =\ 0;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ model\ :\ models)\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \_\ +=\ model.GetVerticesCount();}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_;}
\DoxyCodeLine{00098\ \ \ \ \ \}}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_dx11_scene_a20798bd31b7da10923adb1c5a88fb659}{GetSceneTriangleCount}}()\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \_\ =\ 0;}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ model\ :\ models)\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \_\ +=\ model.GetInfo()-\/>TriangleCount;}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_;}
\DoxyCodeLine{00105\ \ \ \ \ \}}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_dx11_scene_a18b1342bc888a659fd2c1ba477d78d53}{Draw}}()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ model\ :\ models)\ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ model.Draw();}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00110\ \ \ \ \ \}}
\DoxyCodeLine{00111\ \};}

\end{DoxyCode}
