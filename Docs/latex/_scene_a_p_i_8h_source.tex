\doxysection{Scene\+API.\+h}
\hypertarget{_scene_a_p_i_8h_source}{}\label{_scene_a_p_i_8h_source}\index{C:/Users/quant/source/repos/Dark-\/Matter-\/Engine/ENGINE/SceneAPI/SceneAPI.h@{C:/Users/quant/source/repos/Dark-\/Matter-\/Engine/ENGINE/SceneAPI/SceneAPI.h}}
\mbox{\hyperlink{_scene_a_p_i_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_model_a_p_i_8h}{ModelAPI.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_physics_manager_8h}{PhysicsManager.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_model_info_8h}{ModelAPI/ModelInfo.h}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <d3d11.h>}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_scene}{Scene}}\ \{}
\DoxyCodeLine{00010\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00011\ \ \ \ \ \mbox{\hyperlink{class_physics_manager}{PhysicsManager}}\ physiqueManager;}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{class_scene_af6e09d91ebd10ae9cc7c12c39d06386c}{\string~Scene}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_scene_afb2af250b9f2ef40e5c5dceb6a92a439}{AddModel}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ path[],\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ texture\_path[])\ =\ 0;}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_scene_ab7d8a77b62e67d41b65b602dbc47233e}{RemoveModel}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{bt_soft_body_8cpp_a7eee887aa26478b2de7daf4c0c2cb61b}{IDX}})\ =\ 0;}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_scene_a561b00a297005b29321d213b6e35d38d}{GetModelCount}}()\ =\ 0;}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{class_model_info}{ModelInfo}}*\ \mbox{\hyperlink{class_scene_a78ed160594d48fac694916278d1b2e41}{GetModelInfoAtIdx}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{bt_soft_body_8cpp_a7eee887aa26478b2de7daf4c0c2cb61b}{IDX}})\ =\ 0;}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keyword}{virtual}\ std::vector<ModelInfo*>\ \mbox{\hyperlink{class_scene_ab465bab3a5c5d8e796c119c39613a4cf}{GetModelsInfo}}()\ =\ 0;}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_scene_a78a30d753625ef4103c1e2a41d53bbdd}{AddPostProccessPass}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ path[],\ \textcolor{keywordtype}{int}\ ScreenWidth,\ \textcolor{keywordtype}{int}\ ScreenHeight)\ =\ 0;}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_scene_a7bc6d66c5fc1cd0d6649fe15f41cfb5a}{RemovePostProccessPassAtIdx}}(\textcolor{keywordtype}{int}\ Idx)\ =\ 0;}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{bt_convex_hull_computer_8cpp_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}\ \mbox{\hyperlink{class_scene_a65eb4520e815ce0957ea957fae4641a7}{GetRenderTarget}}()\ =\ 0;}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_scene_a38dd60b259a68ce0f9544f7283a6bc9c}{SetDxDeviceContext}}(ID3D11Device*\ dxDevice,\ ID3D11DeviceContext*\ d3d11DevCon);}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_scene_a8680672fd30bb4b345e6fab918e31ecd}{Draw}}()\ =\ 0;}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ }
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ }
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \mbox{\hyperlink{class_physics_manager}{PhysicsManager}}\ \mbox{\hyperlink{class_scene_a3963857418a52f5a556ce158bf1d3dc9}{GetPhysics}}()\ \{\ \textcolor{keywordflow}{return}\ physiqueManager;\ \};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_scene_ac9e539a0dd412c61b554f389d89ad13e}{CreatePhysics}}()\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ physiqueManager.initPhysics();}
\DoxyCodeLine{00040\ \ \ \ \ \}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_scene_a5d9062c0af8a5cdf603aba628bbd7da7}{AddPhysicsBody}}(\mbox{\hyperlink{class_model_info}{ModelInfo}}*\ info)\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_mesh_collider}{MeshCollider}}*\ meshcollider\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_mesh_collider}{MeshCollider}}(info-\/>\mbox{\hyperlink{class_model_info_aafedd499cb205a4273f5f01ec488f330}{vertexs}},\ info-\/>\mbox{\hyperlink{class_model_info_a955b4170e678495296b77febd156d0ea}{indicies}});}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_rigid_body}{RigidBody}}*\ meshbody\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_rigid_body}{RigidBody}}(meshcollider,\ 1,\ \mbox{\hyperlink{bt_vector3_8h_a755c140e1fbddef09844cf2873258525}{btVector3}}(0,\ 3,\ 0));}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ physiqueManager.addRigidBody(meshbody);}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*BoxCollider*\ box\ =\ new\ BoxCollider(btVector3(1,\ 1,\ 1));}}
\DoxyCodeLine{00046\ \textcolor{comment}{\ \ \ \ \ \ \ \ RigidBody*\ boxbody\ =\ new\ RigidBody(box,1,btVector3(0,10,0));}}
\DoxyCodeLine{00047\ \textcolor{comment}{\ \ \ \ \ \ \ \ physiqueManager.addRigidBody(boxbody);*/}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \}}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_scene_acd6b21b61efcca39dcd3d422e91508f7}{AddPhysicsGround}}()\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ground_collider}{GroundCollider}}*\ ground\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_ground_collider}{GroundCollider}}();}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_rigid_ground}{RigidGround}}*\ groundbody\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_rigid_ground}{RigidGround}}(ground);}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ physiqueManager.addGroundBody(groundbody);}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_scene_a33baf71da94b99af8522e554e5aa0411}{UpdatePhysics}}(\textcolor{keywordtype}{float}\ deltaTime)\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ physiqueManager.updatePhysics(deltaTime);}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_scene_a034fd22dd3a4807bd869a66f05fdc76b}{GetCollisionCheck}}(\mbox{\hyperlink{classbt_rigid_body}{btRigidBody}}\&\ body1,\ \mbox{\hyperlink{classbt_rigid_body}{btRigidBody}}\&\ body2)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Récupérer\ le\ monde\ physique}}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{bt_discrete_dynamics_world_8h_a8540038474d43063708b01c72b376965}{btDiscreteDynamicsWorld}}*\ world\ =\ physiqueManager.getWorld();}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!world)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ Vérifier\ que\ le\ monde\ est\ valide}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Récupérer\ le\ dispatcher\ du\ monde\ physique\ (il\ gère\ les\ collisions)}}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbt_dispatcher}{btDispatcher}}*\ dispatcher\ =\ world-\/>getDispatcher();}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Parcourir\ tous\ les\ contacts\ actifs}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{bt_sequential_impulse_constraint_solver_mt_8h_ad78d14cac38555333ae536286a72c72b}{numManifolds}}\ =\ dispatcher-\/>\mbox{\hyperlink{classbt_dispatcher_a0c94a046ac053c226d43211c5379c31f}{getNumManifolds}}();}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{bt_sequential_impulse_constraint_solver_mt_8h_ad78d14cac38555333ae536286a72c72b}{numManifolds}};\ i++)\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{bt_persistent_manifold_8h_aaed89c0c544afc37ffa9f500b5968214}{btPersistentManifold}}*\ contactManifold\ =\ dispatcher-\/>\mbox{\hyperlink{classbt_dispatcher_a0d9d36cd6bb837b95aff718341c02164}{getManifoldByIndexInternal}}(i);}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{bt_collision_object_8h_a162a0e48dd47198d73efdd1fef8747cb}{btCollisionObject}}*\ objA\ =\ contactManifold-\/>getBody0();}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{bt_collision_object_8h_a162a0e48dd47198d73efdd1fef8747cb}{btCollisionObject}}*\ objB\ =\ contactManifold-\/>getBody1();}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Vérifier\ si\ les\ objets\ en\ collision\ sont\ bien\ body1\ et\ body2}}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((objA\ ==\ \&body1\ \&\&\ objB\ ==\ \&body2)\ ||\ (objA\ ==\ \&body2\ \&\&\ objB\ ==\ \&body1))\ \{}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ numContacts\ =\ contactManifold-\/>getNumContacts();}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ numContacts;\ j++)\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbt_manifold_point}{btManifoldPoint}}\&\ pt\ =\ contactManifold-\/>getContactPoint(j);}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pt.\mbox{\hyperlink{classbt_manifold_point_a42cd47cba8f5e1e3f6c24c910224df6d}{getDistance}}()\ <\ -\/0.001f)\ \{\ \ \textcolor{comment}{//\ Collision\ réelle\ uniquement\ si\ distance\ <\ 0}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ Aucune\ collision\ détectée}}
\DoxyCodeLine{00093\ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_scene_ae88adcf618bb173504454639e2d5a6a8}{DestroyPhysics}}()\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ physiqueManager.destroyPhysics();}
\DoxyCodeLine{00096\ \ \ \ \ \}}
\DoxyCodeLine{00097\ \};}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ }

\end{DoxyCode}
