\doxysection{b3\+Gpu\+Narrow\+Phase.\+h}
\hypertarget{b3_gpu_narrow_phase_8h_source}{}\label{b3_gpu_narrow_phase_8h_source}\index{C:/Users/quant/source/repos/Dark-\/Matter-\/Engine/ENGINE/Libraries/include/Bullet/Bullet3OpenCL/RigidBody/b3GpuNarrowPhase.h@{C:/Users/quant/source/repos/Dark-\/Matter-\/Engine/ENGINE/Libraries/include/Bullet/Bullet3OpenCL/RigidBody/b3GpuNarrowPhase.h}}
\mbox{\hyperlink{b3_gpu_narrow_phase_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ B3\_GPU\_NARROWPHASE\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ B3\_GPU\_NARROWPHASE\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{b3_collidable_8h}{Bullet3Collision/NarrowPhaseCollision/shared/b3Collidable.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{b3_open_c_l_include_8h}{Bullet3OpenCL/Initialize/b3OpenCLInclude.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{b3_aligned_object_array_8h}{Bullet3Common/b3AlignedObjectArray.h}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{b3_vector3_8h}{Bullet3Common/b3Vector3.h}}"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classb3_gpu_narrow_phase_a6e38b9b451152d0e858c3598a458927d}{b3GpuNarrowPhase}}}
\DoxyCodeLine{00010\ \{}
\DoxyCodeLine{00011\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structb3_gpu_narrow_phase_internal_data}{b3GpuNarrowPhaseInternalData}}*\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a644f2e983cc87a9b2e069d59f0123e29}{m\_data}};}
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a364fac51219582ec7b62f410c9333f2d}{m\_acceleratedCompanionShapeIndex}};}
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a68987f1890f1ba3be09f807a808173e6}{m\_planeBodyIndex}};}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a4251bbf5fc74abab04eb4bc13353d326}{m\_static0Index}};}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ \ \ \mbox{\hyperlink{clew_8h_a96a7d9b65e8319e2f8c751455ae92ec8}{cl\_context}}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a2d3f999868913cf5d0478235b4ed94b3}{m\_context}};}
\DoxyCodeLine{00018\ \ \ \ \ \mbox{\hyperlink{clew_8h_abf58c686ce1c1e363fc1c219416bae3b}{cl\_device\_id}}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a0300a6fcc4cf95d070c7255122dfe831}{m\_device}};}
\DoxyCodeLine{00019\ \ \ \ \ \mbox{\hyperlink{clew_8h_ac0eceefed5ddf03f817f9c9a20fdc616}{cl\_command\_queue}}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a9f1f1946e0768cc8fb4d755074cdac68}{m\_queue}};}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a71bbf65f0fc7dafb23495112e4e6674e}{registerConvexHullShapeInternal}}(\textcolor{keyword}{class}\ \mbox{\hyperlink{b3_convex_utility_8h_a553f298e5310937193a4666977a37832}{b3ConvexUtility}}*\ convexPtr,\ \mbox{\hyperlink{structb3_collidable}{b3Collidable}}\&\ col);}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_ae79c35b30b8d20196e99ca064edb57b0}{registerConcaveMeshShape}}(\mbox{\hyperlink{classb3_aligned_object_array}{b3AlignedObjectArray<b3Vector3>}}*\ vertices,\ \mbox{\hyperlink{classb3_aligned_object_array}{b3AlignedObjectArray<int>}}*\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aedcdb207abe418517ae3def4e91c9d12}{indices}},\ \mbox{\hyperlink{structb3_collidable}{b3Collidable}}\&\ col,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ scaling);}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{classb3_gpu_narrow_phase_a6e38b9b451152d0e858c3598a458927d}{b3GpuNarrowPhase}}(\mbox{\hyperlink{clew_8h_a96a7d9b65e8319e2f8c751455ae92ec8}{cl\_context}}\ vtx,\ \mbox{\hyperlink{clew_8h_abf58c686ce1c1e363fc1c219416bae3b}{cl\_device\_id}}\ dev,\ \mbox{\hyperlink{clew_8h_ac0eceefed5ddf03f817f9c9a20fdc616}{cl\_command\_queue}}\ q,\ \textcolor{keyword}{const}\ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structb3_config}{b3Config}}\&\ config);}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a1cb1aa486651624c8a07a6a1c209506b}{\string~b3GpuNarrowPhase}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a2947e446c0068b8f40c6726a70858310}{registerSphereShape}}(\textcolor{keywordtype}{float}\ radius);}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a281a654e16f5b7be23a07b35d3a6b3a8}{registerPlaneShape}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{b3_vector3_8h_a22c8d3827b387afa3b74e32d614eab50}{b3Vector3}}\&\ planeNormal,\ \textcolor{keywordtype}{float}\ planeConstant);}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a8bbcf9e34e95a188229adca76e1dfd5a}{registerCompoundShape}}(\mbox{\hyperlink{classb3_aligned_object_array}{b3AlignedObjectArray<b3GpuChildShape>}}*\ childShapes);}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a2e1dd8d288a64100049483dfb0832557}{registerFace}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{b3_vector3_8h_a22c8d3827b387afa3b74e32d614eab50}{b3Vector3}}\&\ faceNormal,\ \textcolor{keywordtype}{float}\ faceConstant);}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a44b79cb7ee7ac757ba8263e6518a0bd7}{registerConcaveMesh}}(\mbox{\hyperlink{classb3_aligned_object_array}{b3AlignedObjectArray<b3Vector3>}}*\ vertices,\ \mbox{\hyperlink{classb3_aligned_object_array}{b3AlignedObjectArray<int>}}*\ \mbox{\hyperlink{imgui__impl__opengl3__loader_8h_aedcdb207abe418517ae3def4e91c9d12}{indices}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ scaling);}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{comment}{//do\ they\ need\ to\ be\ merged?}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_ac3f85f0fbe0be5b9405dc871e06e96a5}{registerConvexHullShape}}(\mbox{\hyperlink{b3_convex_utility_8h_a553f298e5310937193a4666977a37832}{b3ConvexUtility}}*\ utilPtr);}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_ac3f85f0fbe0be5b9405dc871e06e96a5}{registerConvexHullShape}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ vertices,\ \textcolor{keywordtype}{int}\ strideInBytes,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{b3_voronoi_simplex_solver_8h_aee9486536d8206675957a9ad71092b6e}{numVertices}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ scaling);}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a2c237fd5cbf245dde202a87f08c151d2}{registerRigidBody}}(\textcolor{keywordtype}{int}\ collidableIndex,\ \textcolor{keywordtype}{float}\ mass,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ position,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ orientation,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ aabbMin,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ aabbMax,\ \textcolor{keywordtype}{bool}\ writeToGpu);}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a43fca86190db2e5b417b5aac59e26d17}{setObjectTransform}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ position,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ orientation,\ \textcolor{keywordtype}{int}\ bodyIndex);}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a747142acc70066c36005be09a65149a3}{writeAllBodiesToGpu}}();}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a163feb9ef98ee529de702c17fede027f}{reset}}();}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a2c144f0ee0f7b9674dc1a47439cc2331}{readbackAllBodiesToCpu}}();}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_aa5d7c36f3ba0ea5fe05e1832b5c654e7}{getObjectTransformFromCpu}}(\textcolor{keywordtype}{float}*\ position,\ \textcolor{keywordtype}{float}*\ orientation,\ \textcolor{keywordtype}{int}\ bodyIndex)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_ad6bfa1509fb8c841f5f811bb9f220e78}{setObjectTransformCpu}}(\textcolor{keywordtype}{float}*\ position,\ \textcolor{keywordtype}{float}*\ orientation,\ \textcolor{keywordtype}{int}\ bodyIndex);}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a53ecf63392d309c5628358eaffa3328f}{setObjectVelocityCpu}}(\textcolor{keywordtype}{float}*\ linVel,\ \textcolor{keywordtype}{float}*\ angVel,\ \textcolor{keywordtype}{int}\ bodyIndex);}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a9ca8a0b622cb0c6726c97f7f4b031d80}{computeContacts}}(\mbox{\hyperlink{clew_8h_af2141916ad9655073b9810d7bc71494d}{cl\_mem}}\ broadphasePairs,\ \textcolor{keywordtype}{int}\ numBroadphasePairs,\ \mbox{\hyperlink{clew_8h_af2141916ad9655073b9810d7bc71494d}{cl\_mem}}\ aabbsWorldSpace,\ \textcolor{keywordtype}{int}\ numObjects);}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{clew_8h_af2141916ad9655073b9810d7bc71494d}{cl\_mem}}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a2560b560f4c9c6a6dd723579e8b138c6}{getBodiesGpu}}();}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structb3_rigid_body_data}{b3RigidBodyData}}*\ \mbox{\hyperlink{classb3_gpu_narrow_phase_aa89e365ae4f14fdbad983ef579e9174e}{getBodiesCpu}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{//struct\ b3RigidBodyData*\ getBodiesCpu();}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_afe05bb65f62862c649dc6e6e47a9fbd9}{getNumBodiesGpu}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{clew_8h_af2141916ad9655073b9810d7bc71494d}{cl\_mem}}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a45b11be6e1c0bce737f6936ebb3cc71e}{getBodyInertiasGpu}}();}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a64b15709cde1bd6446a03cdb3502bab0}{getNumBodyInertiasGpu}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{clew_8h_af2141916ad9655073b9810d7bc71494d}{cl\_mem}}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_ade69d5b9b39619047f4877dfc7ed78a9}{getCollidablesGpu}}();}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structb3_collidable}{b3Collidable}}*\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a144b8aa09f8a8d790991458bc14b5634}{getCollidablesCpu}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_acde0159ae9290312b57eb6db5985d184}{getNumCollidablesGpu}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{struct\ }b3SapAabb*\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a5cfaad63b804950b066e5f7b56f9c0f9}{getLocalSpaceAabbsCpu}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{struct\ }b3Contact4*\ \mbox{\hyperlink{classb3_gpu_narrow_phase_ac720d988a65474db19b496dcd575dd0c}{getContactsCPU}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \mbox{\hyperlink{clew_8h_af2141916ad9655073b9810d7bc71494d}{cl\_mem}}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a5e9f4cbb21961b90f61ae009b17e4232}{getContactsGpu}}();}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a87cc7d1f640e9eadce1f4bf93274d4d0}{getNumContactsGpu}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{clew_8h_af2141916ad9655073b9810d7bc71494d}{cl\_mem}}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a81c4c7e65e14f4200c9d17e957242dd7}{getAabbLocalSpaceBufferGpu}}();}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a55a422812bbb998962041dcff20fda84}{getNumRigidBodies}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a710d7c2609e8ef84aed2c52ba3b59172}{allocateCollidable}}();}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a6518547e9cb3fea687280744800c6181}{getStatic0Index}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00082\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a4251bbf5fc74abab04eb4bc13353d326}{m\_static0Index}};}
\DoxyCodeLine{00084\ \ \ \ \ \}}
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{structb3_collidable}{b3Collidable}}\&\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a7f78f8f7d314d7afb03f5a9c8c60e33a}{getCollidableCpu}}(\textcolor{keywordtype}{int}\ collidableIndex);}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structb3_collidable}{b3Collidable}}\&\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a7f78f8f7d314d7afb03f5a9c8c60e33a}{getCollidableCpu}}(\textcolor{keywordtype}{int}\ collidableIndex)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structb3_gpu_narrow_phase_internal_data}{b3GpuNarrowPhaseInternalData}}*\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a6732e44ababcb27974a3bb54c6c2b849}{getInternalData}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00089\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a644f2e983cc87a9b2e069d59f0123e29}{m\_data}};}
\DoxyCodeLine{00091\ \ \ \ \ \}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{structb3_gpu_narrow_phase_internal_data}{b3GpuNarrowPhaseInternalData}}*\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a051628d348cd44f95c2dc2ac4ef3acc5}{getInternalData}}()}
\DoxyCodeLine{00094\ \ \ \ \ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a644f2e983cc87a9b2e069d59f0123e29}{m\_data}};}
\DoxyCodeLine{00096\ \ \ \ \ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{struct\ }b3SapAabb\&\ \mbox{\hyperlink{classb3_gpu_narrow_phase_a54035162902ace4124dd8a7dd08d8dda}{getLocalSpaceAabb}}(\textcolor{keywordtype}{int}\ collidableIndex)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00099\ \};}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//B3\_GPU\_NARROWPHASE\_H}}

\end{DoxyCode}
